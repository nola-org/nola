"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[173],{5821:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});const a="EditPostPage_btn_container__mlXEg",i="EditPostPage_btn__iiJWb",n="EditPostPage_btn_active__L9IGU",o="EditPostPage_btn_back__L8v28",c="EditPostPage_btn_back_active__PZts-";var l=s(5043),r=s(3216),d=s(2382),u=s(3401),m=s(5474),g=s(3881),b=(s(778),s(1623)),h=s(3712),p=s(998),v=s(579);const _=()=>{var e;const t=(0,r.zy)(),s=(0,r.Zp)(),_=(0,r.g)(),[P,y]=(0,l.useState)(!1),[k,j]=(0,l.useState)(!1),[x,f]=(0,l.useState)([]),[E,w]=(0,l.useState)({}),[S,N]=(0,l.useState)((()=>[{id:(0,h.Ak)(),url:"",name:""}])),[A,C]=(0,l.useState)(0!==x.length||{description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]});(0,l.useEffect)((()=>{(async e=>{const{data:t}=await(0,d.Sz)();w(null===(e=t.profile_picture)||void 0===e?void 0:e.replace("image/upload/",""))})()}),[]),(0,l.useEffect)((()=>{(async()=>{try{if(t.state)return f(t.state),C(t.state),void N(t.state.links);const{data:e}=await(0,d.iM)(_.editPostId);f(e),N(e.links)}catch(e){console.log(e)}})()}),[_,A,t.state]);return(0,v.jsxs)("div",{children:["EditPostPage",(0,v.jsx)(u.N9,{}),!k&&(0,v.jsx)("div",{children:x&&(null===(e=Object.keys(x))||void 0===e?void 0:e.length)>0?(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0);try{await(0,d.hM)(_.editPostId,{...x,category:{name:x.category.name},subcategory:{name:x.subcategory.name},status:"pending"});j(!0),setTimeout((()=>{s("/main")}),3e3)}catch(t){(0,m.a)(t.message||"Try again later.")}},children:[(0,v.jsx)(g.z,{post:x,setPost:f,links:S,setLinks:N}),(0,v.jsxs)("div",{className:a,children:[(0,v.jsx)("button",{type:"button",className:i,onClick:()=>{console.log(A),s("/main/addPost/previewAdvertisemet",{state:{data:x,profile:E,from:t.pathname}})},children:(0,v.jsx)("span",{className:o,children:" Preview"})}),(0,v.jsx)("button",{type:"submit",className:`${i} ${n}`,children:(0,v.jsx)("span",{className:c,children:"Publish"})})]})]}):(0,v.jsx)("div",{className:"loader",children:(0,v.jsx)(p.$,{})})}),k&&(0,v.jsxs)(b.Z,{children:["Advertisement is under moderation. ",(0,v.jsx)("br",{}),"It will take about 15 minutes."]})]})}},778:(e,t,s)=>{s.d(t,{y:()=>i});var a=s(3401);s(2342);const i=e=>{(0,a.oR)(`${e}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},2342:()=>{}}]);
//# sourceMappingURL=173.56a5823b.chunk.js.map
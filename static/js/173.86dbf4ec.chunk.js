"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[173],{5821:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});const i="EditPostPage_btn_container__mlXEg",s="EditPostPage_btn__iiJWb",o="EditPostPage_btn_active__L9IGU",n="EditPostPage_btn_disabled__SqYol",l="EditPostPage_btn_back__L8v28",d="EditPostPage_btn_back_active__PZts-";var r=a(5043),u=a(3216),v=a(2382),c=a(3401),g=a(5474),m=a(3881),b=(a(778),a(1623)),h=a(3712),p=a(998),y=a(579);const _=()=>{var e,t,a;const _=(0,u.zy)(),P=(0,u.Zp)(),f=(0,u.g)(),[k,j]=(0,r.useState)(!1),[x,E]=(0,r.useState)(!1),[w,S]=(0,r.useState)([]),[T,N]=(0,r.useState)({}),[C,A]=(0,r.useState)((()=>[{id:(0,h.Ak)(),url:"",name:""}])),[I,L]=(0,r.useState)((()=>0!==w.length||{description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]}));(0,r.useEffect)((()=>{(async e=>{const{data:t}=await(0,v.Sz)();N(null===(e=t.profile_picture)||void 0===e?void 0:e.replace("image/upload/",""))})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{var e;if(_.state)return S(_.state),L(_.state),void A(_.state.links);const s=await(0,v.iM)(f.editPostId);var t,a,i;if(200===s.status)return S(null===s||void 0===s?void 0:s.data),void A(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.links);if(403===(null===s||void 0===s?void 0:s.status))return(0,g.a)((null===s||void 0===s||null===(a=s.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.detail)||"Try again later."),void setTimeout((()=>{P("/main")}),3e3);throw new Error((null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.detail)||(null===s||void 0===s?void 0:s.message)||"Try again later.")}catch(s){console.error("Error fetching post data:",s),(0,g.a)(s.message||"Try again later.")}})()}),[f.editPostId,_.state,P]),(0,r.useEffect)((()=>{var e,t,a,i;""!==(null===w||void 0===w?void 0:w.title)&&null!==w&&void 0!==w&&null!==(e=w.banners)&&void 0!==e&&e.some((e=>0!==(null===e||void 0===e?void 0:e.length)))&&0!==(null===w||void 0===w||null===(t=w.description)||void 0===t?void 0:t.length)&&""!==(null===w||void 0===w||null===(a=w.category)||void 0===a?void 0:a.name)&&""!==(null===w||void 0===w||null===(i=w.subcategory)||void 0===i?void 0:i.name)?j(!0):j(!1)}),[null===w||void 0===w||null===(e=w.category)||void 0===e?void 0:e.name,null===w||void 0===w||null===(t=w.subcategory)||void 0===t?void 0:t.name,null===w||void 0===w?void 0:w.title,null===w||void 0===w?void 0:w.banners,null===w||void 0===w?void 0:w.description]);return(0,y.jsxs)("div",{children:["EditPostPage",(0,y.jsx)(c.N9,{}),!x&&(0,y.jsx)("div",{children:w&&(null===(a=Object.keys(w))||void 0===a?void 0:a.length)>0?(0,y.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await(0,v.hM)(f.editPostId,{...w,category:{name:w.category.name},subcategory:{name:w.subcategory.name},status:"pending"});throw 201!==e.status&&200!==e.status||(E(!0),setTimeout((()=>{P("/main")}),3e3)),new Error("Try again later.")}catch(t){(0,g.a)(t.message||"Try again later.")}},children:[(0,y.jsx)(m.z,{post:w,setPost:S,links:C,setLinks:A}),(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)("button",{type:"button",className:s,onClick:()=>{console.log(I),P("/main/addPost/previewAdvertisemet",{state:{data:w,profile:T,from:_.pathname}})},children:(0,y.jsx)("span",{className:l,children:" Preview"})}),(0,y.jsx)("button",{type:"submit",className:`${s}  ${k?o:n}`,disabled:!k,children:(0,y.jsx)("span",{className:d,children:"Publish"})})]})]}):(0,y.jsx)("div",{className:"loader",children:(0,y.jsx)(p.$,{})})}),x&&(0,y.jsxs)(b.Z,{children:["Advertisement is under moderation. ",(0,y.jsx)("br",{}),"It will take about 15 minutes."]})]})}},778:(e,t,a)=>{a.d(t,{y:()=>o});var i=a(3401);a(2342);let s=!1;const o=e=>{s||(s=!0,(0,i.oR)(`${e}`,{onClose:()=>{s=!1},position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}))}},2342:()=>{}}]);
//# sourceMappingURL=173.86dbf4ec.chunk.js.map
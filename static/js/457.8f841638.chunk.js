"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[457],{3577:(t,e,a)=>{a.d(e,{h:()=>r});var n,i,l=a(5043);function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},o.apply(null,arguments)}function s(t,e){let{title:a,titleId:s,...r}=t;return l.createElement("svg",o({width:56,height:56,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":s},r),a?l.createElement("title",{id:s},a):null,n||(n=l.createElement("path",{d:"M16.3333 28H39.6666",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),i||(i=l.createElement("path",{d:"M25.6666 18.6667L16.3333 28.0001L25.6666 37.3334",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const r=l.forwardRef(s);a.p},1465:(t,e,a)=>{a.d(e,{A:()=>A});a(5043);var n=a(5475);const i="GoBackButton_goBack__ZzB5R",l="GoBackButton_titleRecovery__QYtyY",o="GoBackButton_iconDark__uKQvR";var s=a(7914),r=a(3577),d=a(579);const A=t=>{let{to:e,title:a,imgSrc:A,imgAlt:c,imgWidth:v,imgHeight:u,onClick:h}=t;const{theme:m,setTheme:g}=(0,s.y)();return(0,d.jsxs)("div",{className:i,children:[(0,d.jsx)(n.N_,{to:e,onClick:h,className:"dark"===m?o:"",children:(0,d.jsx)(r.h,{})}),(0,d.jsx)("h3",{className:`${l} dark:text-white`,children:a})]})}},9367:(t,e,a)=>{a.d(e,{a:()=>c});const n="Modal_backdrop__bhG2y",i="Modal_modal__quYqb",l="Modal_children__lIYUp",o="Modal_modal_title__v+1Yd",s="Modal_modal_descr__a-7tP",r="Modal_modal_btn__0avU-",d="Modal_modal_text__pEPCJ";var A=a(579);const c=t=>{let{confirm:e,cancel:a,title:c,description:v,info:u,handleToggleModal:h,btn_text_confirm:m="Confirm",btn_text_cancel:g="Cancel",childrenEl:E=!1,children:B}=t;return(0,A.jsx)("div",{className:n,onClick:t=>{const{target:e,currentTarget:a}=t;e===a&&h()},children:(0,A.jsx)("div",{className:`${i} dark:bg-black`,children:(0,A.jsx)("div",{className:l,children:E?B:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h2",{className:o,children:c}),(0,A.jsx)("p",{className:s,children:v}),u?(0,A.jsx)("p",{className:s,children:u}):"",(0,A.jsx)("button",{type:"button",className:r,onClick:e,children:m}),(0,A.jsx)("p",{type:"button",className:`${d} dark:text-white`,onClick:a,children:g})]})})})})}},2177:(t,e,a)=>{a.r(e),a.d(e,{default:()=>m});var n=a(5043),i=a(2382),l=a(3216),o=(a(2094),a(3881));const s={top_container:"EditDraftsPage_top_container__ZBWCi",title_back:"EditDraftsPage_title_back__GYMVC",btn_container:"EditDraftsPage_btn_container__NY+Ik",btn_preview_container:"EditDraftsPage_btn_preview_container__4NrLf",btn_preview:"EditDraftsPage_btn_preview__N3D7k",btn:"EditDraftsPage_btn__K9mUI",btn_active:"EditDraftsPage_btn_active__1zTR2",btn_disabled:"EditDraftsPage_btn_disabled__Zxbnj"};var r=a(5474),d=a(1465),A=a(9367),c=a(1623),v=(a(3401),a(3712)),u=a(998),h=a(579);const m=()=>{var t,e,a;const m=(0,l.Zp)(),g=(0,l.zy)(),E=(0,l.g)(),[B,b]=(0,n.useState)(!1),[_,f]=(0,n.useState)(!1),[p,Q]=(0,n.useState)(!1),[k,x]=(0,n.useState)([]),[w,y]=(0,n.useState)({}),[j,D]=(0,n.useState)((()=>{var t;return(null===g||void 0===g||null===(t=g.state)||void 0===t?void 0:t.links)||[{id:(0,v.Ak)(),url:"",name:""}]})),[P,C]=(0,n.useState)((()=>({description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]})));(0,n.useEffect)((()=>{(async()=>{try{var t,e,a,n;if(g.state)return x(g.state),C(g.state),void D((null===g||void 0===g||null===(e=g.state)||void 0===e||null===(a=e.links)||void 0===a?void 0:a.length)>0?null===g||void 0===g||null===(n=g.state)||void 0===n?void 0:n.links:[{id:(0,v.Ak)(),url:"",name:""}]);const A=await(0,i.Az)(E.editDraftsId);var l,o,s,d;if(200===A.status)return x(A.data),C(A.data),void(null===A||void 0===A||null===(l=A.data)||void 0===l||null===(o=l.links)||void 0===o||o.map((t=>{let{href:e,action:a}=t;var n,i,l,o;0!==(null===e||void 0===e?void 0:e.length)&&0!==(null===a||void 0===a?void 0:a.length)?g.state?D((null===g||void 0===g||null===(n=g.state)||void 0===n||null===(i=n.links)||void 0===i?void 0:i.length)>0?null===g||void 0===g||null===(l=g.state)||void 0===l?void 0:l.links:[{id:(0,v.Ak)(),url:"",name:""}]):D(null===A||void 0===A||null===(o=A.data)||void 0===o?void 0:o.links):D([{id:(0,v.Ak)(),url:"",name:""}])})));if(403===(null===A||void 0===A?void 0:A.status))return(0,r.a)((null===A||void 0===A||null===(s=A.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.detail)||"Try again later."),void setTimeout((()=>{m("/main")}),3e3);throw new Error((null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.detail)||(null===A||void 0===A?void 0:A.message)||"Try again later.")}catch(c){var A;(0,r.a)((null===c||void 0===c||null===(A=c.response)||void 0===A?void 0:A.statusText)||c.message||"Try again later.")}})()}),[]),(0,n.useEffect)((()=>{(async t=>{const{data:e}=await(0,i.Sz)();y(null===(t=e.profile_picture)||void 0===t?void 0:t.replace("image/upload/",""))})()}),[]);(0,n.useEffect)((()=>{var t,e,a,n;""!==(null===k||void 0===k?void 0:k.title)&&null!==k&&void 0!==k&&null!==(t=k.banners)&&void 0!==t&&t.some((t=>0!==(null===t||void 0===t?void 0:t.length)))&&0!==(null===k||void 0===k||null===(e=k.description)||void 0===e?void 0:e.length)&&""!==(null===k||void 0===k||null===(a=k.category)||void 0===a?void 0:a.name)&&""!==(null===k||void 0===k||null===(n=k.subcategory)||void 0===n?void 0:n.name)?Q(!0):Q(!1)}),[null===k||void 0===k||null===(t=k.category)||void 0===t?void 0:t.name,null===k||void 0===k||null===(e=k.subcategory)||void 0===e?void 0:e.name,null===k||void 0===k?void 0:k.title,null===k||void 0===k?void 0:k.banners,null===k||void 0===k?void 0:k.description]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{children:"EditDraftsPage"}),!_&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:s.top_container,onClick:()=>{b((t=>!t))},children:[(0,h.jsx)(d.A,{to:"",imgWidth:"50px",imgHeight:"50px",imgAlt:"Go back"}),(0,h.jsx)("p",{className:`${s.title_back} dark:text-white`,children:"New advertisement"})]}),k&&(null===(a=Object.keys(k))||void 0===a?void 0:a.length)>0?(0,h.jsx)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(0,i.hM)(E.editDraftsId,{...k,category:{name:k.category.name},subcategory:{name:k.subcategory.name},status:"pending"});if(201===t.status||200===t.status)return f(!0),void setTimeout((()=>{m("/main")}),3e3);throw new Error("Try again later.")}catch(a){var e;(0,r.a)((null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.statusText)||a.message||"Try again later.")}},children:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.z,{post:k,setPost:x,links:j,setLinks:D}),(0,h.jsxs)("div",{className:s.btn_container,children:[(0,h.jsx)("button",{type:"button",className:s.btn_preview_container,onClick:()=>{m("/main/addPost/previewAdvertisemet",{state:{data:k,profile:w,from:g.pathname}})},children:(0,h.jsx)("span",{className:`${s.btn_preview} dark:text-white`,children:"Preview"})}),(0,h.jsx)("button",{type:"submit",className:`${s.btn} ${p?s.btn_active:s.btn_disabled}`,disabled:!p,children:(0,h.jsx)("span",{className:s.btn_back_active,children:"Publish"})})]})]})}):(0,h.jsx)("div",{className:"loader",children:(0,h.jsx)(u.$,{})})]}),B&&(0,h.jsx)(A.a,{handleToggleModal:()=>{b((t=>!t))},confirm:async()=>{try{b((t=>!t));const e=await(0,i.hM)(E.editDraftsId,{category:{name:k.category.name},subcategory:{name:k.subcategory.name},...k,status:"draft"});if(201!==e.status&&200!==e.status||m("/main"),400===e.status){var t;const a=(null===(t=e.response)||void 0===t?void 0:t.data)||{},n=Object.entries(a).flatMap((t=>{let[e,a]=t;if("category"===e||"subcategory"===e){const t=a.name;return(Array.isArray(t)?t:[t]).map((t=>`${e}.name: ${t}`))}return(Array.isArray(a)?a:[a]).map((t=>`${e}: ${t}`))}));return void(n.length>0&&(0,r.a)(n.join("\n")))}throw new Error("Try again later.")}catch(e){(0,r.a)(e.message)}},cancel:()=>{m("/main"),b((t=>!t))},title:"Save a draft?",description:"You can come back to edit later."}),_&&(0,h.jsxs)(c.Z,{children:["Advertisement is under moderation. ",(0,h.jsx)("br",{}),"It will take about 15 minutes."]})]})}},2094:t=>{t.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAA4ADgDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+/igAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD4O/bo/bo8N/sfeG/Bnhjwx4M1b47/ALVnx31a88F/stfsteC7y2g8b/GPxvBbCe8v7+8nElr4F+EvgW1kTxB8WPix4gSLwz4E8MxSXNzJd6vd6Po+pgHsH7JfhT9pTwf8DPClh+138UvCvxb/AGg9Tutf8T/EHXfAPhOz8HfD3w5e+Kdcv9ds/ht8P9Nhhi1PUPBPwz0++tfBHhvxN4qkufGHirTdEh8Q+JpxquozwQAH0jQAUAFABQBVvjeiyvDpq2raiLW4Ngt80qWTXvlP9lW8e3SSdLUz+WLhoY3lWLeY0ZwFIB/Gn+wGf+Ct3/DeX7bP/Cz1/wCCc4/4KXDUlHiI/tRt+0w3idv2Rv7SU/DBv2NR4GRfBSfshf2sZ1vV8JtJ45PxEW4f9oBx45fSY0AP24/435/9Ygf/ADc+gA/435/9Ygf/ADc+gD9dLEXosrMak1q2oi1txftYrKlk175Sfams0uHknS1M/mG3WaR5Vi2CR2cFiAWqACgAoA+Dv26P2F/Df7YPhvwZ4n8MeM9W+BH7VnwI1a88afstftS+C7O2n8b/AAc8bz2wgvLC/s5zHa+OvhL46tY08P8AxY+E/iB5fDPjvwzLJbXMdpq9po+saYAexfsm+K/2kvGHwK8Jah+1z8LvC/wl/aE0248QeGPiJoPgPxVZeL/h54h1Dwtr+o6DZfEj4eanBcz6pZeB/ibpdhZeOfDnhvxXFZeMfClhrkfhvxNatqelzXd0AfR9ABQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQAA/9k="}}]);
//# sourceMappingURL=457.8f841638.chunk.js.map
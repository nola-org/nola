"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[173],{5821:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});const s="EditPostPage_btn_container__mlXEg",i="EditPostPage_btn__iiJWb",n="EditPostPage_btn_active__L9IGU",o="EditPostPage_btn_back__L8v28",l="EditPostPage_btn_back_active__PZts-";var r=a(5043),d=a(3216),c=a(2382),u=a(3401),v=a(5474),m=a(3881),g=(a(778),a(1623)),h=a(3712),p=a(998),b=a(579);const P=()=>{var e;const t=(0,d.zy)(),a=(0,d.Zp)(),P=(0,d.g)(),[_,y]=(0,r.useState)(!1),[f,k]=(0,r.useState)(!1),[j,x]=(0,r.useState)([]),[E,w]=(0,r.useState)({}),[S,T]=(0,r.useState)((()=>[{id:(0,h.Ak)(),url:"",name:""}])),[N,A]=(0,r.useState)((()=>0!==j.length||{description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]}));(0,r.useEffect)((()=>{(async e=>{const{data:t}=await(0,c.Sz)();w(null===(e=t.profile_picture)||void 0===e?void 0:e.replace("image/upload/",""))})()}),[]),(0,r.useEffect)((()=>{(async()=>{try{var e;if(t.state)return x(t.state),A(t.state),void T(t.state.links);const o=await(0,c.iM)(P.editPostId);var s,i,n;if(200===o.status)return x(null===o||void 0===o?void 0:o.data),void T(null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.links);if(403===(null===o||void 0===o?void 0:o.status))return(0,v.a)((null===o||void 0===o||null===(i=o.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.detail)||"Try again later."),void setTimeout((()=>{a("/main")}),3e3);throw new Error((null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.detail)||(null===o||void 0===o?void 0:o.message)||"Try again later.")}catch(o){console.error("Error fetching post data:",o),(0,v.a)(o.message||"Try again later.")}})()}),[P.editPostId,t.state,a]);return(0,b.jsxs)("div",{children:["EditPostPage",(0,b.jsx)(u.N9,{}),!f&&(0,b.jsx)("div",{children:j&&(null===(e=Object.keys(j))||void 0===e?void 0:e.length)>0?(0,b.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0);try{await(0,c.hM)(P.editPostId,{...j,category:{name:j.category.name},subcategory:{name:j.subcategory.name},status:"pending"});k(!0),setTimeout((()=>{a("/main")}),3e3)}catch(t){(0,v.a)(t.message||"Try again later.")}},children:[(0,b.jsx)(m.z,{post:j,setPost:x,links:S,setLinks:T}),(0,b.jsxs)("div",{className:s,children:[(0,b.jsx)("button",{type:"button",className:i,onClick:()=>{console.log(N),a("/main/addPost/previewAdvertisemet",{state:{data:j,profile:E,from:t.pathname}})},children:(0,b.jsx)("span",{className:o,children:" Preview"})}),(0,b.jsx)("button",{type:"submit",className:`${i} ${n}`,children:(0,b.jsx)("span",{className:l,children:"Publish"})})]})]}):(0,b.jsx)("div",{className:"loader",children:(0,b.jsx)(p.$,{})})}),f&&(0,b.jsxs)(g.Z,{children:["Advertisement is under moderation. ",(0,b.jsx)("br",{}),"It will take about 15 minutes."]})]})}},778:(e,t,a)=>{a.d(t,{y:()=>i});var s=a(3401);a(2342);const i=e=>{(0,s.oR)(`${e}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},2342:()=>{}}]);
//# sourceMappingURL=173.5507e272.chunk.js.map
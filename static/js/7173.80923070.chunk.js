"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[7173],{5821:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});const a="EditPostPage_btn_container__mlXEg",n="EditPostPage_btn__iiJWb",i="EditPostPage_btn_active__L9IGU",o="EditPostPage_btn_back__L8v28",c="EditPostPage_btn_back_active__PZts-";var r=s(5043),l=s(3216),d=s(2382),u=s(3401),m=s(5474),g=s(3881),b=(s(778),s(1623)),h=s(3712),v=s(5546),P=s(579);const _=()=>{var t;const e=(0,l.zy)(),s=(0,l.Zp)(),_=(0,l.g)(),[p,k]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[x,f]=(0,r.useState)([]),[E,w]=(0,r.useState)((()=>[{id:(0,h.Ak)(),url:"",name:""}])),[N,S]=(0,r.useState)(0!==x.length||{description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]});(0,r.useEffect)((()=>{(async()=>{try{if(e.state)return f(e.state),S(e.state),void w(e.state.links);const{data:t}=await(0,d.iM)(_.editPostId);f(t),w(t.links)}catch(t){console.log(t)}})()}),[_,N,e.state]);return(0,P.jsxs)("div",{children:["EditPostPage",(0,P.jsx)(u.N9,{}),!y&&(0,P.jsx)("div",{children:x&&(null===(t=Object.keys(x))||void 0===t?void 0:t.length)>0?(0,P.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),k(!0);try{await(0,d.hM)(_.editPostId,{...x,category:{name:x.category.name},subcategory:{name:x.subcategory.name},status:"pending"});j(!0),setTimeout((()=>{s("/main")}),3e3)}catch(e){(0,m.a)(e.message||"Try again later.")}},children:[(0,P.jsx)(g.z,{post:x,setPost:f,links:E,setLinks:w}),(0,P.jsxs)("div",{className:a,children:[(0,P.jsx)("button",{type:"button",className:n,onClick:()=>{console.log(N),s("/main/addPost/previewAdvertisemet",{state:{data:x,from:e.pathname}})},children:(0,P.jsx)("span",{className:o,children:" Preview"})}),(0,P.jsx)("button",{type:"submit",className:`${n} ${i}`,children:(0,P.jsx)("span",{className:c,children:"Publish"})})]})]}):(0,P.jsx)("div",{className:"loader",children:(0,P.jsx)(v.$,{})})}),y&&(0,P.jsxs)(b.Z,{children:["Advertisement is under moderation. ",(0,P.jsx)("br",{}),"It will take about 15 minutes."]})]})}},778:(t,e,s)=>{s.d(e,{y:()=>n});var a=s(3401);s(2342);const n=t=>{(0,a.oR)(`${t}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},2342:()=>{}}]);
//# sourceMappingURL=7173.80923070.chunk.js.map
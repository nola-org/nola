"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[173],{5821:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});const s="EditPostPage_btn_container__mlXEg",i="EditPostPage_btn__iiJWb",n="EditPostPage_btn_active__L9IGU",o="EditPostPage_btn_back__L8v28",r="EditPostPage_btn_back_active__PZts-";var c=a(5043),l=a(3216),d=a(2382),u=a(3401),m=a(5474),g=a(3881),b=(a(778),a(1623)),h=a(3712),p=a(998),v=a(579);const P=()=>{var e;const t=(0,l.zy)(),a=(0,l.Zp)(),P=(0,l.g)(),[_,y]=(0,c.useState)(!1),[k,j]=(0,c.useState)(!1),[x,f]=(0,c.useState)([]),[E,S]=(0,c.useState)({}),[w,N]=(0,c.useState)((()=>[{id:(0,h.Ak)(),url:"",name:""}])),[A,C]=(0,c.useState)((()=>0!==x.length||{description:"",title:"",category:{name:""},subcategory:{name:""},callToAction:"Read more",callToActionLinks:"",banners:[]}));(0,c.useEffect)((()=>{(async e=>{const{data:t}=await(0,d.Sz)();S(null===(e=t.profile_picture)||void 0===e?void 0:e.replace("image/upload/",""))})()}),[]),(0,c.useEffect)((()=>{(async()=>{try{if(t.state)return f(t.state),C(t.state),void N(t.state.links);const{data:e}=await(0,d.iM)(P.editPostId);f(e),N(e.links)}catch(e){(0,m.a)(e.message||"Try again later.")}})()}),[P,A,t.state]);return(0,v.jsxs)("div",{children:["EditPostPage",(0,v.jsx)(u.N9,{}),!k&&(0,v.jsx)("div",{children:x&&(null===(e=Object.keys(x))||void 0===e?void 0:e.length)>0?(0,v.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),y(!0);try{await(0,d.hM)(P.editPostId,{...x,category:{name:x.category.name},subcategory:{name:x.subcategory.name},status:"pending"});j(!0),setTimeout((()=>{a("/main")}),3e3),localStorage.removeItem("createPost")}catch(t){(0,m.a)(t.message||"Try again later.")}},children:[(0,v.jsx)(g.z,{post:x,setPost:f,links:w,setLinks:N}),(0,v.jsxs)("div",{className:s,children:[(0,v.jsx)("button",{type:"button",className:i,onClick:()=>{console.log(A),a("/main/addPost/previewAdvertisemet",{state:{data:x,profile:E,from:t.pathname}})},children:(0,v.jsx)("span",{className:o,children:" Preview"})}),(0,v.jsx)("button",{type:"submit",className:`${i} ${n}`,children:(0,v.jsx)("span",{className:r,children:"Publish"})})]})]}):(0,v.jsx)("div",{className:"loader",children:(0,v.jsx)(p.$,{})})}),k&&(0,v.jsxs)(b.Z,{children:["Advertisement is under moderation. ",(0,v.jsx)("br",{}),"It will take about 15 minutes."]})]})}},778:(e,t,a)=>{a.d(t,{y:()=>i});var s=a(3401);a(2342);const i=e=>{(0,s.oR)(`${e}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},2342:()=>{}}]);
//# sourceMappingURL=173.5bac31bc.chunk.js.map
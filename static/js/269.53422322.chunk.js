"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[269],{3577:(t,e,a)=>{a.d(e,{h:()=>l});var n,r,i=a(5043);function s(){return s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},s.apply(null,arguments)}function o(t,e){let{title:a,titleId:o,...l}=t;return i.createElement("svg",s({width:56,height:56,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":o},l),a?i.createElement("title",{id:o},a):null,n||(n=i.createElement("path",{d:"M16.3333 28H39.6666",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),r||(r=i.createElement("path",{d:"M25.6666 18.6667L16.3333 28.0001L25.6666 37.3334",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const l=i.forwardRef(o);a.p},1465:(t,e,a)=>{a.d(e,{A:()=>d});a(5043);var n=a(5475);const r="GoBackButton_goBack__ZzB5R",i="GoBackButton_titleRecovery__QYtyY",s="GoBackButton_iconDark__uKQvR";var o=a(7914),l=a(3577),c=a(579);const d=t=>{let{to:e,title:a,imgSrc:d,imgAlt:u,imgWidth:_,imgHeight:m,onClick:v}=t;const{theme:h,setTheme:b}=(0,o.y)();return(0,c.jsxs)("div",{className:r,children:[(0,c.jsx)(n.N_,{to:e,onClick:v,className:"dark"===h?s:"",children:(0,c.jsx)(l.h,{})}),(0,c.jsx)("h3",{className:`${i} dark:text-white`,children:a})]})}},9367:(t,e,a)=>{a.d(e,{a:()=>u});const n="Modal_backdrop__bhG2y",r="Modal_modal__quYqb",i="Modal_children__lIYUp",s="Modal_modal_title__v+1Yd",o="Modal_modal_descr__a-7tP",l="Modal_modal_btn__0avU-",c="Modal_modal_text__pEPCJ";var d=a(579);const u=t=>{let{confirm:e,cancel:a,title:u,description:_,info:m,handleToggleModal:v,btn_text_confirm:h="Confirm",btn_text_cancel:b="Cancel",childrenEl:g=!1,children:p}=t;return(0,d.jsx)("div",{className:n,onClick:t=>{const{target:e,currentTarget:a}=t;e===a&&v()},children:(0,d.jsx)("div",{className:`${r} dark:bg-black`,children:(0,d.jsx)("div",{className:i,children:g?p:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:s,children:u}),(0,d.jsx)("p",{className:o,children:_}),m?(0,d.jsx)("p",{className:o,children:m}):"",(0,d.jsx)("button",{type:"button",className:l,onClick:e,children:h}),(0,d.jsx)("p",{type:"button",className:`${c} dark:text-white`,onClick:a,children:b})]})})})})}},157:(t,e,a)=>{a.r(e),a.d(e,{default:()=>v});var n=a(5043),r=a(3216),i=a(2382),s=(a(3401),a(3712));const o={top_container:"AddPostPage_top_container__L3kbY",title_back:"AddPostPage_title_back__h16Q6",btn_container:"AddPostPage_btn_container__qH9XC",btn_preview_container:"AddPostPage_btn_preview_container__SCnpe",btn_preview:"AddPostPage_btn_preview__bxgyO",btn:"AddPostPage_btn__I-hDg",btn_active:"AddPostPage_btn_active__PJF7b",btn_disabled:"AddPostPage_btn_disabled__bL330"};var l=a(5474),c=a(1623),d=a(1465),u=a(9367),_=a(3881),m=a(579);const v=t=>{let{postEdit:e,setPostEdit:a,draftsEdit:v,setDraftsEdit:h}=t;const b=(0,r.zy)(),g=(0,r.Zp)(),[p,k]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[j,y]=(0,n.useState)(!1),[w,P]=(0,n.useState)(!1),[N,A]=(0,n.useState)({}),[S,C]=(0,n.useState)((()=>{var t,e,a,n;return null!==(t=null!==(e=null===(a=JSON.parse(localStorage.getItem("createPost")))||void 0===a?void 0:a.links)&&void 0!==e?e:null===b||void 0===b||null===(n=b.state)||void 0===n?void 0:n.links)&&void 0!==t?t:[{id:(0,s.Ak)(),href:"",action:""}]})),[E,M]=(0,n.useState)((()=>{var t;try{const t=localStorage.getItem("createPost");if(t)return JSON.parse(t)}catch(e){console.warn("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 localStorage:",e)}return null!==(t=b.state)&&void 0!==t?t:{title:"",description:"",category:{id:"",name:""},subcategory:{id:"",name:""},callToAction:"Read more",callToActionLinks:"",banners:[],status:"draft"}}));(0,n.useEffect)((()=>{(async t=>{const{data:e}=await(0,i.Sz)();A(null===(t=e.profile_picture)||void 0===t?void 0:t.replace("image/upload/",""))})()}),[]);(0,n.useEffect)((()=>{var t,e,a,n;""!==(null===E||void 0===E?void 0:E.title)&&""!==(null===E||void 0===E||null===(t=E.category)||void 0===t?void 0:t.name)&&""!==(null===E||void 0===E||null===(e=E.subcategory)||void 0===e?void 0:e.name)&&null!==E&&void 0!==E&&null!==(a=E.banners)&&void 0!==a&&a.some((t=>0!==(null===t||void 0===t?void 0:t.length)))&&0!==(null===E||void 0===E||null===(n=E.description)||void 0===n?void 0:n.length)?P(!0):P(!1)}),[E.category.name,E.subcategory.name,E.title,null===E||void 0===E?void 0:E.banners,E.description]);return(0,m.jsxs)("div",{children:[!j&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:o.top_container,onClick:()=>{k((t=>!t))},children:[(0,m.jsx)(d.A,{to:"",imgWidth:"50px",imgHeight:"50px",imgAlt:"Go back"}),(0,m.jsx)("p",{className:`${o.title_back} dark:text-white`,children:"New advertisement"})]}),(0,m.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await(0,i.rK)({...E,status:"pending"});if(201===t.status||200===t.status)return y(!0),setTimeout((()=>{g("/main")}),3e3),void localStorage.removeItem("createPost");throw new Error("Try again later.")}catch(e){(0,l.a)(e.message||"Try again later.")}},children:[(0,m.jsx)(_.z,{setPost:M,post:E,links:S,setLinks:C}),(0,m.jsxs)("div",{className:o.btn_container,children:[(0,m.jsx)("button",{type:"button",className:o.btn_preview_container,onClick:()=>{g("/main/addPost/previewAdvertisemet",{state:{data:E,profile:N,from:b.pathname}})},children:(0,m.jsx)("span",{className:`${o.btn_preview} dark:text-white`,children:"Preview"})}),(0,m.jsx)("button",{type:"submit",className:`${o.btn} ${w?o.btn_active:o.btn_disabled}`,disabled:!w,children:(0,m.jsx)("span",{className:o.btn_back_active,children:"Publish"})})]})]})]}),p&&(0,m.jsxs)(u.a,{handleToggleModal:()=>{k((t=>!t))},confirm:async()=>{try{k((t=>!t));const e=await(0,i.rK)({...E,status:"draft"});if(201===e.status||200===e.status)return localStorage.removeItem("createPost"),void g("/main");if(400===e.status){var t;const a=(null===(t=e.response)||void 0===t?void 0:t.data)||{},n=Object.entries(a).flatMap((t=>{let[e,a]=t;if("category"===e||"subcategory"===e){const t=a.name;return(Array.isArray(t)?t:[t]).map((t=>`${e}.name: ${t}`))}return(Array.isArray(a)?a:[a]).map((t=>`${e}: ${t}`))}));return void(n.length>0&&(0,l.a)(n.join("\n")))}throw new Error("Try again later.")}catch(e){(0,l.a)(e.message||"Try again later.")}},cancel:()=>{g("/main"),k((t=>!t)),localStorage.removeItem("createPost")},title:"Add post to draft?",description:"You can come back to edit later.",children:[(0,m.jsx)("h2",{className:o.modal_title,children:"Add post to draft?"}),(0,m.jsx)("p",{className:o.modal_descr,children:"You can come back to edit later."})]}),j&&(0,m.jsxs)(c.Z,{children:["Advertisement is under moderation. ",(0,m.jsx)("br",{}),"It will take about 15 minutes."]})]})}}}]);
//# sourceMappingURL=269.53422322.chunk.js.map
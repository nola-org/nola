"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[140],{9367:(e,t,s)=>{s.d(t,{a:()=>v});const a="Modal_backdrop__bhG2y",l="Modal_modal__quYqb",o="Modal_children__lIYUp",r="Modal_modal_title__v+1Yd",i="Modal_modal_descr__a-7tP",n="Modal_modal_btn__0avU-",d="Modal_modal_text__pEPCJ";var c=s(579);const v=e=>{let{confirm:t,cancel:s,title:v,description:u,info:m,handleToggleModal:g,btn_text_confirm:h="Confirm",btn_text_cancel:_="Cancel",childrenEl:f=!1,children:S}=e;return(0,c.jsx)("div",{className:a,onClick:e=>{const{target:t,currentTarget:s}=e;t===s&&g()},children:(0,c.jsx)("div",{className:`${l} dark:bg-black`,children:(0,c.jsx)("div",{className:o,children:f?S:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:r,children:v}),(0,c.jsx)("p",{className:i,children:u}),m?(0,c.jsx)("p",{className:i,children:m}):"",(0,c.jsx)("button",{type:"button",className:n,onClick:t,children:h}),(0,c.jsx)("p",{type:"button",className:`${d} dark:text-white`,onClick:s,children:_})]})})})})}},5140:(e,t,s)=>{s.r(t),s.d(t,{SavedPostsPage:()=>I,default:()=>O});var a=s(5475);const l="SavedPostsPage_title__fVFrK",o="SavedPostsPage_list__NdlYq",r="SavedPostsPage_item__6cIC6",i="SavedPostsPage_img__h4kCK",n="SavedPostsPage_item_footer__2B8kP",d="SavedPostsPage_item_description__KeAhY",c="SavedPostsPage_item_btn__YS5tW",v="SavedPostsPage_iconDark__JSFuK",u="SavedPostsPage_container__svGzl",m="SavedPostsPage_title_empty__BzukX",g="SavedPostsPage_description__5NqX+";var h,_=s(5043);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},f.apply(null,arguments)}function S(e,t){let{title:s,titleId:a,...l}=e;return _.createElement("svg",f({width:14,height:19,viewBox:"0 0 14 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},l),s?_.createElement("title",{id:a},s):null,h||(h=_.createElement("path",{d:"M12 0.19043H2C0.9 0.19043 0 1.09043 0 2.19043V18.1904L7 15.1904L14 18.1904V2.19043C14 1.09043 13.1 0.19043 12 0.19043Z",fill:"#666666"})))}const p=_.forwardRef(S);s.p;s(778);var P=s(3401),x=s(9367),k=s(7914),N=s(2382),b=s(5474),y=s(8406),j=s(998),C=s(1910),w=s(579);const I=()=>{const{token:e}=(0,y.A)(),{theme:t}=(0,k.y)(),[s,h]=(0,_.useState)([]),[f,S]=(0,_.useState)(!0),[I,O]=(0,_.useState)(null),{savedPosts:J,isSaved:$,toggleSave:E}=(0,C.J)();(0,_.useEffect)((()=>{e?(0,N.CC)().then((e=>h(e))).catch((()=>(0,b.a)("Error loading saved posts"))).finally((()=>S(!1))):(h(J),S(!1))}),[e,J]);return(0,w.jsxs)("div",{children:[(0,w.jsx)(P.N9,{}),(0,w.jsx)("h1",{className:l,children:"My saved"}),f&&(0,w.jsx)("div",{className:"loader",children:(0,w.jsx)(j.$,{})}),s.length>0?(0,w.jsx)("ul",{className:o,children:s.map((e=>(0,w.jsxs)("li",{className:r,children:[(0,w.jsx)(a.k2,{to:`/main/${e.id}`,children:(0,w.jsx)("img",{src:e.banners[0]||e.banners[1]||e.banners[2],alt:"",className:i})}),(0,w.jsxs)("div",{className:n,children:[(0,w.jsx)(a.k2,{to:`/${e.advertiser.id}`,children:(0,w.jsx)("p",{className:`${d} dark:text-white`,children:e.title})}),(0,w.jsx)("button",{type:"button",className:`${c} ${"dark"===t?v:""}`,onClick:()=>O(e.id),children:(0,w.jsx)(p,{})})]})]},e.id)))}):(0,w.jsxs)("div",{className:u,children:[(0,w.jsx)("h2",{className:`${m} dark:text-white`,children:"This list is empty"}),(0,w.jsx)("p",{className:`${g} dark:text-white`,children:"Add something you\u2019ve liked from the main page"})]}),I&&(0,w.jsx)(x.a,{title:"Are you sure you want to delete?",confirm:()=>{return E({id:e=I}),h((t=>t.filter((t=>t.id!==e)))),void O(null);var e},cancel:()=>O(null)})]})},O=I},5474:(e,t,s)=>{s.d(t,{a:()=>l});var a=s(3401);const l=e=>{a.oR.error(`${e}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},778:(e,t,s)=>{s.d(t,{y:()=>l});var a=s(3401);s(2342);const l=e=>{(0,a.oR)(`${e}`,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}},1910:(e,t,s)=>{s.d(t,{J:()=>d});var a=s(5043),l=s(8406),o=s(5474),r=s(2382),i=s(778);const n="savedPost";function d(){const{token:e}=(0,l.A)(),t=(0,a.useRef)(!0),[s,d]=(0,a.useState)((()=>{var e;return null!==(e=JSON.parse(localStorage.getItem("savedPostId")))&&void 0!==e?e:[]})),[c,v]=(0,a.useState)((()=>{var e;return null!==(e=JSON.parse(localStorage.getItem(n)))&&void 0!==e?e:[]}));(0,a.useEffect)((()=>{try{const e=localStorage.getItem("persist:auth");if(!e)return void(t.current=!0);const s=JSON.parse(e),a=s.token?JSON.parse(s.token):null;t.current=!a}catch(e){t.current=!0}}),[]),(0,a.useEffect)((()=>{if(!e)return t.current||(d([]),v([]),localStorage.removeItem("savedPostId"),localStorage.removeItem(n),window.location.reload()),localStorage.setItem("savedPostId",JSON.stringify([])),void localStorage.setItem(n,JSON.stringify([]));(async()=>{try{var e;const s=(await(0,r.CC)()).map((e=>e.id)),a=(null!==(e=JSON.parse(localStorage.getItem(n)))&&void 0!==e?e:[]).filter((e=>!s.includes(e.id)));for(const e of a)try{await(0,r.Ki)(e.id,e)}catch(t){console.error(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u0441\u0442\u0430 ID=${e.id}`,t)}const l=[...new Set([...s,...a.map((e=>e.id))])];d(l),v([]),localStorage.removeItem("savedPostId"),localStorage.removeItem(n)}catch(t){(0,o.a)(null===t||void 0===t?void 0:t.message)}})()}),[e]),(0,a.useEffect)((()=>{!e&&t.current&&(localStorage.setItem("savedPostId",JSON.stringify(s)),localStorage.setItem(n,JSON.stringify(c)))}),[s,c,e]);const u=(0,a.useCallback)((async t=>{const a=t.id;if(e)try{s.includes(a)?(await(0,r.Dx)(a),(0,o.a)("Post has been deleted"),d((e=>e.filter((e=>e!==a))))):(await(0,r.Ki)(a,{}),(0,i.y)("Post successfully saved"),d((e=>[...e,a])))}catch(l){(0,o.a)(null===l||void 0===l?void 0:l.message)}else d((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a])),v((e=>e.some((e=>e.id===a))?((0,o.a)("Post has been deleted"),e.filter((e=>e.id!==a))):((0,i.y)("Post successfully saved"),[...e,t])))}),[e,s,c]),m=(0,a.useCallback)((e=>s.includes(e)),[s]);return{savedPostIds:s,savedPosts:c,isSaved:m,toggleSave:u}}},2342:()=>{}}]);
//# sourceMappingURL=140.18d58459.chunk.js.map
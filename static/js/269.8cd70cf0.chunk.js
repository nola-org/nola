"use strict";(self.webpackChunknola=self.webpackChunknola||[]).push([[269],{3577:(t,e,a)=>{a.d(e,{h:()=>l});var n,s,r=a(5043);function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i.apply(null,arguments)}function o(t,e){let{title:a,titleId:o,...l}=t;return r.createElement("svg",i({width:56,height:56,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":o},l),a?r.createElement("title",{id:o},a):null,n||(n=r.createElement("path",{d:"M16.3333 28H39.6666",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})),s||(s=r.createElement("path",{d:"M25.6666 18.6667L16.3333 28.0001L25.6666 37.3334",stroke:"black",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}const l=r.forwardRef(o);a.p},1465:(t,e,a)=>{a.d(e,{A:()=>d});a(5043);var n=a(5475);const s="GoBackButton_goBack__ZzB5R",r="GoBackButton_titleRecovery__QYtyY",i="GoBackButton_iconDark__uKQvR";var o=a(7914),l=a(3577),c=a(579);const d=t=>{let{to:e,title:a,imgSrc:d,imgAlt:_,imgWidth:m,imgHeight:h,onClick:u}=t;const{theme:b,setTheme:g}=(0,o.y)();return(0,c.jsxs)("div",{className:s,children:[(0,c.jsx)(n.N_,{to:e,onClick:u,className:"dark"===b?i:"",children:(0,c.jsx)(l.h,{})}),(0,c.jsx)("h3",{className:`${r} dark:text-white`,children:a})]})}},9367:(t,e,a)=>{a.d(e,{a:()=>_});const n="Modal_backdrop__bhG2y",s="Modal_modal__quYqb",r="Modal_children__lIYUp",i="Modal_modal_title__v+1Yd",o="Modal_modal_descr__a-7tP",l="Modal_modal_btn__0avU-",c="Modal_modal_text__pEPCJ";var d=a(579);const _=t=>{let{confirm:e,cancel:a,title:_,description:m,info:h,handleToggleModal:u,btn_text_confirm:b="Confirm",btn_text_cancel:g="Cancel",childrenEl:p=!1,children:v}=t;return(0,d.jsx)("div",{className:n,onClick:t=>{const{target:e,currentTarget:a}=t;e===a&&u()},children:(0,d.jsx)("div",{className:`${s} dark:bg-black`,children:(0,d.jsx)("div",{className:r,children:p?v:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{className:i,children:_}),(0,d.jsx)("p",{className:o,children:m}),h?(0,d.jsx)("p",{className:o,children:h}):"",(0,d.jsx)("button",{type:"button",className:l,onClick:e,children:b}),(0,d.jsx)("p",{type:"button",className:`${c} dark:text-white`,onClick:a,children:g})]})})})})}},157:(t,e,a)=>{a.r(e),a.d(e,{default:()=>b});var n=a(5043),s=a(3216),r=a(2382),i=a(3401),o=a(3712);const l={top_container:"AddPostPage_top_container__L3kbY",title_back:"AddPostPage_title_back__h16Q6",btn_container:"AddPostPage_btn_container__qH9XC",btn_preview_container:"AddPostPage_btn_preview_container__SCnpe",btn_preview:"AddPostPage_btn_preview__bxgyO",btn:"AddPostPage_btn__I-hDg",btn_active:"AddPostPage_btn_active__PJF7b",btn_disabled:"AddPostPage_btn_disabled__bL330"};var c=a(5474),d=a(1623),_=a(1465),m=a(9367),h=a(3881),u=a(579);const b=t=>{let{postEdit:e,setPostEdit:a,draftsEdit:b,setDraftsEdit:g}=t;const p=(0,s.zy)(),v=(0,s.Zp)(),[k,x]=(0,n.useState)(!1),[f,j]=(0,n.useState)(!1),[P,w]=(0,n.useState)(!1),[y,N]=(0,n.useState)(!1),[A,S]=(0,n.useState)({}),[C,E]=(0,n.useState)((()=>{var t,e,a,n;return null!==(t=null!==(e=null===(a=JSON.parse(localStorage.getItem("createPost")))||void 0===a?void 0:a.links)&&void 0!==e?e:null===p||void 0===p||null===(n=p.state)||void 0===n?void 0:n.links)&&void 0!==t?t:[{id:(0,o.Ak)(),href:"",action:""}]})),[M,L]=(0,n.useState)((()=>{var t;try{const t=localStorage.getItem("createPost");if(t)return JSON.parse(t)}catch(e){console.warn("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0447\u0442\u0435\u043d\u0438\u0438 localStorage:",e)}return null!==(t=p.state)&&void 0!==t?t:{title:"",description:"",category:{id:"",name:""},subcategory:{id:"",name:""},callToAction:"Read more",callToActionLinks:"",banners:[],status:"draft"}}));(0,n.useEffect)((()=>{(async t=>{const{data:e}=await(0,r.Sz)();S(null===(t=e.profile_picture)||void 0===t?void 0:t.replace("image/upload/",""))})()}),[]);(0,n.useEffect)((()=>{""!==M.title&&""!==M.category&&""!==M.subcategory&&0!==M.banners.length?N(!0):N(!1)}),[M.category,M.subcategory,M.title,M.banners]);return(0,u.jsxs)("div",{children:[!P&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.N9,{}),(0,u.jsxs)("div",{className:l.top_container,onClick:()=>{x((t=>!t))},children:[(0,u.jsx)(_.A,{to:"",imgWidth:"50px",imgHeight:"50px",imgAlt:"Go back"}),(0,u.jsx)("p",{className:`${l.title_back} dark:text-white`,children:"New advertisement"})]}),(0,u.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await(0,r.rK)({...M,status:"pending"});w(!0),setTimeout((()=>{v("/main")}),3e3),localStorage.removeItem("createPost")}catch(e){(0,c.a)(e.message||"Try again later.")}},children:[(0,u.jsx)(h.z,{setPost:L,post:M,links:C,setLinks:E}),(0,u.jsxs)("div",{className:l.btn_container,children:[(0,u.jsx)("button",{type:"button",className:l.btn_preview_container,onClick:()=>{v("/main/addPost/previewAdvertisemet",{state:{data:M,profile:A,from:p.pathname}})},children:(0,u.jsx)("span",{className:`${l.btn_preview} dark:text-white`,children:"Preview"})}),(0,u.jsx)("button",{type:"submit",className:`${l.btn} ${y?l.btn_active:l.btn_disabled}`,disabled:!y,children:(0,u.jsx)("span",{className:l.btn_back_active,children:"Publish"})})]})]})]}),k&&(0,u.jsxs)(m.a,{handleToggleModal:()=>{x((t=>!t))},confirm:async()=>{try{x((t=>!t));const t=await(0,r.rK)({...M,status:"draft"});console.log("drafts",t),localStorage.removeItem("createPost"),v("/main")}catch(t){(0,c.a)(t.message||"Try again later.")}},cancel:()=>{v("/main"),x((t=>!t)),localStorage.removeItem("createPost")},title:"Add post to draft?",description:"You can come back to edit later.",children:[(0,u.jsx)("h2",{className:l.modal_title,children:"Add post to draft?"}),(0,u.jsx)("p",{className:l.modal_descr,children:"You can come back to edit later."})]}),P&&(0,u.jsxs)(d.Z,{children:["Advertisement is under moderation. ",(0,u.jsx)("br",{}),"It will take about 15 minutes."]})]})}}}]);
//# sourceMappingURL=269.8cd70cf0.chunk.js.map